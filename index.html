<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Shopping cart</title>

    <style>

    </style>
</head>
<body>
    
    <div id="cart-qty">

    </div>

    <ul id="item-list">
        <!-- Cart items -->

    </ul>

    <div id="cart-total">

    </div>

    <script>
        const itemList = document.getElementById('item-list')
        const cartQty = document.getElementById('cart-qty')
        const cartTotal = document.getElementById('cart-total')

        const cart = [ ]

        // -------------------------------------------------------
        // Add item
        function addItem(name, price){
            for (let i = 0; i < cart.length; i += 1){
                if (cart[i].name === name) {
                    cart[i].qty += 1
                    return
                }
            }

            const item = {name, price, qty: 1}
            cart.push(item)
        }

        // -------------------------------------------------------
        // Show items
        function showItem(){

            cartQty.innerHTML = `You have ${getQty()} items in your cart.`

            let itemStr = ''
            for (let i = 0; i < cart.length; i += 1){
                const {name, price, qty} = cart[i]

                itemStr += `<li> ${name}: $${price} x ${qty} = $${qty * price} </li>`
            }
            itemList.innerHTML = itemStr

            cartTotal.innerHTML = `Total in cart: $${getTotal()}`
        }

        // -------------------------------------------------------
        // Get Qty
        function getQty(){
            let qty = 0
            for (let i = 0; i < cart.length; i += 1){
                qty += cart[i].qty
            }
            return qty
        }

        // -------------------------------------------------------
        // Get Total
        function getTotal(){
            let total = 0
            for (let i = 0; i < cart.length; i += 1){
                total += cart[i].price * cart[i].qty
            }
            return total.toFixed(2)
        }

        function removeItem(name, qty = 0){
            for (let i = 0; i < cart.length; i += 1){
                if (cart[i].name === name){
                    if (qty > 0) {
                    cart[i].qty -= 1
                    }
                    if (cart[i].qty < 1 || qty === 0) {
                        cart.splice(i, 1)
                    }
                    return
                }
            }
        }

        // -------------------------------------------------------
        addItem('Apple', 0.99)
        addItem('Apple', 0.99)
        addItem('Orange', 1.99)
        addItem('Banana', 2.99)

        showItem()

        removeItem('Apple', 1)
        removeItem('Banana')

        showItem()
    </script>
</body>
</html>